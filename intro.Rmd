---
title: "Intruducción a R"
author: "Laia Egea e Iago Giné"
date: "10-12/12/2019"
abstract: "El objetivo de este curso es introducir el software R a todas las personas que trabajen con datos y darles las herramientas para el manejo y visualización de datos, así como para algunos análisis estadísticos básicos."
output: 
  html_notebook:
    toc: yes

---

# Presentación del entorno R y Rstudio

* [R](https://www.r-project.org/) y [RStudio](https://rstudio.com/) son dos programas diferentes. 
    + R es el programa que calcula. Es software libre y gratuito, inicialmente enfocado a la computación estadística.
    + R también es el lenguaje en el que escribimos los comandos, pues es también el lenguaje de programación.
    + Hoy en día está ampliamente extendido y entre los lenguajes de programación más utilizados. Como consecuencia:
        * existen muchos foros en internet donde los usuarios plantean/resuelven sus dudas y/o propuestas.
        * hay muchas librerías para R en continuo desarrollo y que permiten usarlo de una manera mucho más rápida y eficiente.
    + RStudio es la interfaz donde estaremos trabajando, pues nos ofrece algunas comodidades.
        * Nos permite crear scripts de una manera más ágil y en un entorno mucho más agradable que usando R.
        * También hace más sencillo instalar y desinstalar librerías, cargar y visualizar bases de datos, etc.
        * Ofrece otras posibilidades más allá de R como crear páginas web, pdf's o archivos word con R integrado, que va más allá de este curso.

* Entre las consecuencias de lo ampliamente usado de R está que podemos encontrar en internet muchos tutoriales introductorios en cualquier idioma:
    * [http://rosuda.org/mitarbeiter/pilhoefer/rkurs2.pdf](http://rosuda.org/mitarbeiter/pilhoefer/rkurs2.pdf)
    * [http://b2slab.upc.edu/software-and-tutorials/r-nutshell/](http://b2slab.upc.edu/software-and-tutorials/r-nutshell/)
    * [https://www.cyclismo.org/tutorial/R/index.html](https://www.cyclismo.org/tutorial/R/index.html)
    * [https://www.uv.es/vcoll/preliminares.html](https://www.uv.es/vcoll/preliminares.html)
    * [http://people.math.aau.dk/~sorenh/misc/rdocs/Rintro-notes.pdf](http://people.math.aau.dk/~sorenh/misc/rdocs/Rintro-notes.pdf)
    * en la pestaña Resources de la web de [RStudio](https://rstudio.com/)
    * [otros](https://github.com/iago-pssjd/Curso-R/archive/v1.0.zip)

* ... y foros:
    + principalmente [https://stackoverflow.com/questions/tagged/r](https://stackoverflow.com/questions/tagged/r)
    + para cuestiones relacionadas con RStudio, pero también con las librerías de la familia tidyverse y otros: [https://community.rstudio.com/](https://community.rstudio.com/)

* ... y blogs:
    + principalmente: [https://www.r-bloggers.com/](https://www.r-bloggers.com/)
    + [https://statisticsglobe.com/r-programming-language/](https://statisticsglobe.com/r-programming-language/)
    + enfocados a la estadística, pero no sólo (de hecho, diría que los siguientes son los mejores): 
        * [http://www.sthda.com/english/](http://www.sthda.com/english/)
        * [http://www.flutterbys.com.au/stats/course.html](http://www.flutterbys.com.au/stats/course.html)
        * [http://www.r-tutor.com/](http://www.r-tutor.com/sitemap)
    + enfocado a la investigación en psicología:
        * [http://personality-project.org/r/](http://personality-project.org/r/)
    + centrado en RStudio: [https://support.rstudio.com/hc/en-us](https://support.rstudio.com/hc/en-us)
    + [https://www.statmethods.net/index.html](https://www.statmethods.net/index.html)
    + [https://www.datacamp.com/community/tags/r-programming](https://www.datacamp.com/community/tags/r-programming)
    
* ... y sobre librerías o materias específicas:
    + sobre librerías en general:
        * [https://rdrr.io/](https://rdrr.io/)
        * [https://www.maths.lancs.ac.uk/~rowlings/R/TaskViews/](https://www.maths.lancs.ac.uk/~rowlings/R/TaskViews/)
    + gráficas en general:
        * [https://www.r-graph-gallery.com/](https://www.r-graph-gallery.com/)
    + formas de mostrar descriptivos:
        * [https://dabblingwithdata.wordpress.com/2018/01/02/my-favourite-r-package-for-summarising-data/](https://dabblingwithdata.wordpress.com/2018/01/02/my-favourite-r-package-for-summarising-data/)
    + neuroimagen con R:
        * [https://johnmuschelli.com/](https://johnmuschelli.com/)
    + sistemas de información geográfica (SIG)
        * ...


* ... e incluso multitud de libros que podéis encontrar en [https://bookdown.org/](https://bookdown.org/)

* ... además de diversos cursos online (MOOC's) en plataformas como Coursera, edX, etc.

* En los enlaces citados se encuentran recursos para utilizar las diferentes librerías, y también para usar R enfocado a las más diversas tareas, desde los cálculos estadísticos más habituales, pero, por ejemplo, también para hacer [meta-análisis](https://bookdown.org/MathiasHarrer/Doing_Meta_Analysis_in_R/), [análisis factorial](https://www.statmethods.net/advstats/factor.html), [estadística bayesiana o machine learning](http://www.r-tutor.com/), etc.

* También tenemos las páginas webs principales en torno a R, que también contienen información útil, pero son más técnicas:
    + [R](https://www.r-project.org/), [CRAN](https://cran.r-project.org/)
    + las publicaciones del projecto: [R News](https://www.r-project.org/doc/Rnews/index.html) (2001 - 2008) y [R Journal](https://journal.r-project.org/archive/) (2009 - presente)
    + [R Forge](https://r-forge.r-project.org/)
    + [https://stat.ethz.ch/R-manual/](https://stat.ethz.ch/R-manual/)

* Entonces, este curso, para qué?

* Y por qué R?
    + Porque puedes guardar las instrucciones que ejecutas en R scripts, y ejecutarlas todas de una vez, sin tener que memorizar y repetir cada uno de los pasos.
    + Porque en internet podrás encontrar solución a (casi) todos los problemas que tengas.
    + Porque podrás personalizar/modificar cada instrucción con las opciones que desees.
    + Porque es gratuito, como la versión de código abierto de RStudio, y los puedes instalar donde desees.

# Nociones elementales y funciones básicas

* R es esencialmente una consola en la que el cursos se sitúa tras el símbolo `>`. Ahí se escriben las instrucciones. Se ejecutan con `Enter`.
* Los resultados suelen aparecer debajo. En el caso de gráficas, depende del entorno en que se trabaje (R, RStudio, R Commander, etc.)
* Las instrucciones se pueden escribir todas en un fichero de texto con la extensión `.r` (el R-script), el cual puede ser cargado y ejecutado desde R. En RStudio, lo podemos ver y ejecutar al mismo tiempo en un panel situado junto al panel de la consola.
    + Desde el R-script en RStudio se ejecutan con `Control+Enter`

* Se pueden escribir comentarios (secciones de código que el programa no ejecuta), situando antes un símbolo `#`
* Simplificando, tenemos objetos de distintas clases:
    + 5 tipos de datos básicos: lógicos, enteros, numéricos, complejos, caracteres. Se pueden transformar en este orden por coerción
    + otras estructuras de datos: vectores, factores, matrices, listas, data frames, tablas, etc.
    + funciones
    + para saber más, [Understanding basic data types in R](https://www.diegobarneche.com/2014-12-11-ufsc/lessons/01-intro_r/data-structures.html)
* Estos se pueden guardar en variables por medio de la asignación, que consiste en el símbolo `<-`

```{r, echo=TRUE}

# código de R que no hace nada

x <- 4 # aisgnamos a la variable x el número 4
class(x)
is.character(4)
as.character(4) # un objeto numérico se puede coercionar a un carácter
as.numeric("a") # al revés, no
as.numeric(FALSE) # un objeto lógico se puede coercionar a uno numérico
as.numeric(TRUE)

y <- c(2:4)
y
class(y)
length(y)

```

Otras funciones prácticas para interactuar con el ordenador

```{r, echo=TRUE}

getwd()
# setwd("C:/...")
list.files()

```





## R como calculadora

```{r, echo=TRUE}

2+3
x+5
y <- x-3*7 + 24 # los espacios aquí no afectan
y

```

## Operadores aritméticos y lógicos
## Vectores y data frames 

# Funciones y librerías para interaccionar con otros softwares estadísticos como SPSS o STATA

#### ¿Se puede abrir un fichero en dta (stata) en R y cambiar su versión, por ejemplo de la 15 a la 13?

* La librería [haven](https://haven.tidyverse.org/) nos lo permite (entre las versiones 8 y 15).
* Otras librerías que pueden ayudar son: `foreign` y `readstata13`
* Para saber más, [Datasets basics](https://people.umass.edu/biep640w/pdf/R%20handout%202018%20Dataset%20Basics.pdf)

```{r, echo=TRUE}

library(haven)
dta_data <- read_dta("carsdata.dta") # con un archivo de stata 10
dta_data
str(dta_data)

# file from https://digitalcommons.usu.edu/all_datasets/27/
foreign::read.dta("Jakus_NCDA.dta") # archivo de stata 15
dta_data2 <- read_dta("Jakus_NCDA.dta")
str(dta_data2)
write_dta(dta_data2, "Jakus_NCDA2.dta", version = 13)

```



# Manejo de datos con las librerías dplyr & tidyr 

## Selección y filtro de variables 
## Transformación de variables 
## Estadísticos descriptivos 

# Gráficos con la librería ggplot2
# Tests estadísticos y modelos de regresión habituales para el análisis estadístico
## T-test, anova... 
## Regresión lineal, logística, multinomial... 
